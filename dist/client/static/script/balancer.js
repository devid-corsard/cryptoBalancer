(()=>{const t={btcPrice:"BTC Price:",btcAmount:"BTC Amount:",btcInUsd:"BTC in USD:",difference:"Difference:",usdAmount:"USD Amount:",totalInUsd:"Total in USD:"},e=document.getElementById("table");let n=localStorage.rows?JSON.parse(localStorage.getItem("rows")):o();function c(){e.innerHTML="",function(){let n=document.createElement("tr");for(key in t){let e=document.createElement("th");e.innerText=t[key],n.append(e)}e.append(n)}(),function(t){t.forEach(((t,n)=>{const c=document.createElement("tr");c.id=n,Object.keys(t).forEach((e=>{const n=document.createElement("td"),o=document.createElement("input");o.className=e,o.value="btcAmount"===e?t[e]:+t[e].toFixed(2),o.type="number","totalInUsd"===e&&(o.readOnly=!0,o.type="text",o.style.width="100px"),n.append(o),c.append(n)})),e.append(c)}))}(n),function(t){t.forEach(((t,e)=>{const n=document.getElementById(e),c=document.createElement("button");c.textContent=c.className="duplicate",c.addEventListener("click",(t=>{u(t.target)}));const o=document.createElement("button");o.textContent=o.className="delete",o.addEventListener("click",(t=>{d(t.target)}));const a=document.createElement("button");a.textContent=a.className="balance",a.addEventListener("click",(t=>{s(t.target)})),n.append(c,a,o)}))}(n),a()}function o(){let e=[],n={};for(key in t)n[key]=0;return e.push(n),e}function s(e){const c=e.closest("tr"),o=+c.id,s=n[o],u=e.className;if("INPUT"===e.tagName){if(""===+e.value)return;s[u]=+e.value}const d=function(){const e={};for(let n in t)e[n]=c.querySelector(`.${n}`);return e}();function i(){d.btcAmount.value=s.btcAmount=+(+s.btcInUsd/+s.btcPrice).toFixed(8)}function l(){d.btcInUsd.value=+(s.btcInUsd=+s.btcAmount*+s.btcPrice).toFixed(2)}function r(){d.totalInUsd.value=+(s.totalInUsd=+s.btcInUsd+ +s.usdAmount).toFixed(2)}"btcPrice"===u&&(l(),r()),"btcInUsd"===u&&(i(),r()),"usdAmount"===u&&r(),"btcAmount"===u&&(l(),r()),"balance"===u&&(d.btcInUsd.value=d.usdAmount.value=+(s.btcInUsd=s.usdAmount=+s.totalInUsd/2).toFixed(2),i()),"difference"===u&&(s.usdAmount=(+s.totalInUsd-+s.difference)/2,d.usdAmount.value=+s.usdAmount.toFixed(2),s.btcInUsd=+s.usdAmount+ +s.difference,d.btcInUsd.value=+s.btcInUsd.toFixed(2),i()),d.difference.value=+(s.difference=+s.btcInUsd-+s.usdAmount).toFixed(2),d.difference.style.color=d.difference.value>=0?"green":"red",a()}function u(t){const e=+t.closest("tr").id;let o=[];const s=n.length-1-e==0,u=Object.assign({},n[e]);0!==e||s?s?(o.push(...n),o.push(u)):(o.push(...n.slice(0,e)),o.push(u),o.push(...n.slice(e))):(o.push(n[e]),o.push(u),o.push(...n.slice(1))),n=o,c()}function d(t){if(n.length<2)return n=o(),void c();const e=+t.closest("tr").id;n.splice(e,1),c()}function a(){localStorage.setItem("rows",JSON.stringify(n))}e.addEventListener("input",(t=>{s(t.target)})),c()})();